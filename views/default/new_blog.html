{{#response.files.append(URL('static','js/tiny_mce/tiny_mce.js'))}}
{{extend 'admin_layout.html'}}
{{block custome_header}}
{{
"""
<script type="text/javascript">
tinyMCE.init({
    language : 'zh',  
    mode : "textareas",
    theme : "advanced",
    add_unload_trigger : false,
    plugins : 'safari',     
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    //theme_advanced_resizing : true,
    apply_source_formatting : 0,
});
</script>
"""
}}
{{end custome_header}}
{{=blog_form}}

<div id="target"></div>

<form id="myform">
  <input type="hidden" name="preview_text" id="preview_text" />
  <input type="submit" name="Preview" />
</form>

<p>
{{if blog_comments is not None:}}
{{for blog_comment in blog_comments:}}
<div class="blogComment">
       <strong>{{=blog_comment.title}}</strong>{{=blog_comment.created_date}} | {{=blog_comment.name}} | {{=A('删除',_href=URL('delete_comment', args=[str(blog_comment.id)]))}}<br> 
       <div class="commentContent">
       {{=blog_comment.text}}
       </div>
</div>
{{pass}}
{{pass}}
</p>
<script>
jQuery('#myform').submit(function() {
  $('#preview_text').val($('#ray_blog_text').val())
  ajax('{{=URL('preview_blog')}}',
       ['preview_text'], 'target');
  return false;
});
</script>
